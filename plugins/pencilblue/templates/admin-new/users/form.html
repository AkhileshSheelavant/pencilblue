^tmp_admin-new=head^
  <script src="/js/admin-new/services/uid.js"></script>
  <script src="/js/admin-new/directives/go_back.js"></script>
  <script src="/js/admin-new/factories/users.js"></script>
  <script src="/js/admin-new/factories/roles.js"></script>
  <script src="/js/admin-new/controllers/users/form.js"></script>
  <script>
    var userId = '^user_id^';
  </script>
  <div ng-app="pencilblue.admin.app" ng-controller="AdminUsersFormController">
    ^tmp_admin-new=elements=left_nav^
    ^tmp_admin-new=elements=pill_nav^
    <div class="page-content">
      <div class="container-fluid">
        <div class="row-fluid">
          <div class="col-md-12">
            <i class="fa fa-2x fa-refresh fa-spin page-spinner" ng-if="!user"></i>
            <h1 ng-bind="'^loc_EDIT^ ' + username" ng-if="username"></h1>
            <h1 ng-if="!userId">^loc_NEW_USER^</h1>
          </div>
          <div class="col-md-8" ng-if="user">
            <form name="userForm" ng-submit="saveUser()" no-validate>
              <div id="accordion" role="tablist">
                <div class="panel panel-default">
                  <div class="panel-heading" role="tab" id="accountHeading">
                    <a data-toggle="collapse" data-parent="#accordion" href="#accountPanel" aria-expanded="true" aria-controls="accountPanel">
                      <h4 class="panel-title">
                        <i class="fa fa-fw fa-unlock-alt"></i>^loc_ACCOUNT_INFO^
                      </h4>
                    </a>
                  </div>
                  <div id="accountPanel" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="accountHeading">
                    <div class="panel-body">
                      <div class="form-group" ng-class="{'has-error': formSubmitted && !userForm.username.$valid}">
                        <label>^loc_USERNAME^</label>
                        <input type="text" name="name" class="form-control" ng-model="user.username" required></input>
                      </div>
                      <div class="form-group" ng-class="{'has-error': formSubmitted && !userForm.email.$valid}">
                        <label>^loc_EMAIL^</label>
                        <input type="email" name="email" class="form-control" ng-model="user.email" required></input>
                      </div>
                      <div class="form-group" ng-class="{'has-error': formSubmitted && !userForm.admin.$valid}">
                        <label>^loc_USER_TYPE^</label>
                        <select name="admin" class="form-control" ng-model="user.admin" required>
                          <option value="{{role.value}}" ng-repeat="role in roles" ng-bind="role.name"></option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="panel panel-default">
                  <div class="panel-heading" role="tab" id="personalHeading">
                    <a data-toggle="collapse" data-parent="#accordion" href="#personalPanel" aria-expanded="true" aria-controls="personalPanel">
                      <h4 class="panel-title">
                        <i class="fa fa-fw fa-user"></i>^loc_PERSONAL_INFO^
                      </h4>
                    </a>
                  </div>
                  <div id="personalPanel" class="panel-collapse collapse" role="tabpanel" aria-labelledby="personalHeading">
                    <div class="panel-body">
                      <div class="form-group" ng-class="{'has-error': formSubmitted && !userForm.first_name.$valid}">
                        <label>^loc_FIRST_NAME^</label>
                        <input type="text" name="first_name" class="form-control" ng-model="user.first_name" required></input>
                      </div>
                      <div class="form-group" ng-class="{'has-error': formSubmitted && !userForm.last_name.$valid}">
                        <label>^loc_LAST_NAME^</label>
                        <input type="text" name="last_name" class="form-control" ng-model="user.last_name" required></input>
                      </div>
                      <div class="form-group">
                        <label>^loc_POSITION^</label>
                        <input type="text" name="position" class="form-control" ng-model="user.position"></input>
                      </div>
                      <div class="form-group">
                        <label>^loc_USER_PHOTO^</label>
                      </div>
                    </div>
                  </div>
                </div>

              </div>
              ^tmp_admin-new=elements=alert^
              <button type="button" class="btn btn-default" go-back>
                <i class="fa fa-ban"></i>
                ^loc_CANCEL^
              </button>
              <button type="submit" class="btn" ng-class="{'btn-primary': !saveSuccess, 'btn-success': saveSuccess}" ng-disabled="!userForm.$valid || saveSuccess">
                <i class="fa fa-save" ng-class="{'fa-save': !saving && !saveSuccess, 'fa-check': !saving && saveSuccess, 'fa-refresh fa-spin': saving}"></i>
                ^loc_SAVE^
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
^tmp_admin-new=footer^
